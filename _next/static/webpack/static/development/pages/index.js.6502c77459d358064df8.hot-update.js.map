{"version":3,"file":"static/webpack/static/development/pages/index.js.6502c77459d358064df8.hot-update.js","sources":["webpack:///./components/menu.js"],"sourcesContent":["import Hexagon from 'react-hexagon';\nimport { Box, Column, Text, Button, Divider } from 'gestalt';\nimport { FacebookLoginButton, GoogleLoginButton } from \"react-social-login-buttons\";\nimport firebase from \"firebase\";\nimport firebaseApp from \"./base\";\nimport 'gestalt/dist/gestalt.css';\n\nclass Menu extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            email: null,\n            displayName: null,\n            photo: null,\n            route: \"Home\",\n            views: 0,\n            disabledLogin: true\n        };\n    }\n    \n    changeRoute = (route) => {\n        this.setState({route: route})\n    }\n\n    //xác thực theo provider\n    authenticate = provider => {\n        const authProvider = new firebase.auth[`${provider}AuthProvider`]();\n        firebaseApp\n        .auth()\n        .signInWithPopup(authProvider)\n        .then(this.authHandler);\n    };\n    \n    //xử lý sau khi xác thực\n    authHandler = async authData => {\n        const user = authData.user;\n        console.log(user)\n        var database = firebaseApp.database();\n        var myScores = database.ref(\"scores/\" + user.uid);\n        this.setState({\n            email: user.email,\n            displayName: user.displayName,\n            photo: user.photoURL\n        });\n        myScores.on(\"value\", (data) => {\n            console.log(data.val())\n        })\n        myScores.set({score: 10})\n        var scores = database.\n        this.props.hideMes()\n    };\n    \n    //đăng xuất\n    logout = async () => {\n        await firebase.auth().signOut();\n        this.setState({ email: null, displayName: null, route: \"Home\"});\n        this.props.showMes()\n    };\n\n    //dawng xuat va xoa user\n    logoutAndDelete = async () => {\n        var user = firebase.auth().currentUser;\n        var provider = user?.providerData[0]?.providerId === \"google.com\" ? \"Google\" : \"Facebook\";\n        const authProvider = new firebase.auth[`${provider}AuthProvider`]();\n        await firebaseApp\n        .auth()\n        .signInWithPopup(authProvider)\n        .then(authData => {\n            firebase.auth().currentUser.delete().then(() => {\n                this.setState({ email: null, displayName: null, route: \"Home\"});\n            })\n        });\n        this.props.showMes()\n    }\n\n    componentDidMount() {\n        firebase.auth().onAuthStateChanged(user => {\n          if (user) {\n            this.authHandler({ user });\n          }\n          this.setState({disabledLogin: false})\n        });\n\n        fetch(\"https://api.github.com/repos/contactix/contactix.github.io/traffic/views\")\n        .then(res => res.json()).then(res => this.setState({views: res.count}))\n    }\n\n    render() {\n        return (\n            <Box height=\"100vh\" overflow=\"hidden\">\n                <Box height=\"60vh\">\n                    {\n                        (!this.state.email) ? \n                        <Box>\n                            <Box paddingY={3} display=\"flex\" alignContent=\"center\" alignItems=\"center\" justifyContent=\"center\">\n                                <Text weight=\"bold\" align=\"center\">WELLCOME TO CONTACTI <div className=\"X\"><Hexagon style={{strokeWidth: 50, fill:\"#0080ff\", stroke: \"#000000\"}}/></div><div className=\"X\"><Hexagon style={{strokeWidth: 50, fill:\"#e50000\", stroke: \"#000000\"}} /></div></Text>\n                            </Box>\n                            <FacebookLoginButton onClick={() => this.state.disabledLogin ? {} : this.authenticate(\"Facebook\")} className=\"button_login\"/>\n                            <GoogleLoginButton onClick={() => this.state.disabledLogin ? {} : this.authenticate(\"Google\")} className=\"button_login\"/>\n                            <Box paddingY={3}>\n                                <Text align=\"center\" color=\"gray\">For more information: Please contact hexacon.app@gmail.com</Text>\n                            </Box>\n                        </Box> :\n                        <div>\n                            <Box paddingY={1} display=\"flex\" alignContent=\"center\" alignItems=\"center\" justifyContent=\"center\">\n                                <Text weight=\"bold\" align=\"center\">CONTACTI <div className=\"X\"><Hexagon style={{strokeWidth: 50, fill:\"#0080ff\", stroke: \"#000000\"}}/></div><div className=\"X\"><Hexagon style={{strokeWidth: 50, fill:\"#e50000\", stroke: \"#000000\"}} /></div></Text>\n                            </Box>\n\n                            <Box display=\"flex\" marginTop={3}>\n                                <Column span={4}><Box color={this.state.route === \"Home\" ? \"lightGray\" : \"white\"} >\n                                    <div onClick={e => this.changeRoute('Home')} className=\"tab\"><Text align=\"center\">Home</Text></div>\n                                </Box></Column>\n                                <Column span={4}><Box color={this.state.route === \"Rank\" ? \"lightGray\" : \"white\"} >\n                                    <div onClick={e => this.changeRoute('Rank')} className=\"tab\"><Text align=\"center\">Rank</Text></div>\n                                </Box></Column>\n                                <Column span={4}><Box color={this.state.route === \"Logout\" ? \"lightGray\" : \"white\"} >\n                                    <div onClick={e => this.changeRoute('Logout')} className=\"tab\"><Text align=\"center\">Logout</Text></div>\n                                </Box></Column>\n                            </Box>\n\n                            <Divider/>\n                            \n                            <Box display={this.state.route === \"Home\" ? \"block\" : \"none\"}>\n                                <Box\n                                    alignItems=\"center\"\n                                    direction=\"row\"\n                                    display=\"flex\"\n                                    paddingX={2}\n                                    paddingY={1}\n                                    color=\"lightGray\"\n                                    shape=\"rounded\"\n                                    margin={2}\n                                    dangerouslySetInlineStyle={{__style: {cursor: \"pointer\", opacity: this.props.currentPlayer === \"#0080ff\" ? \"100%\" : \"50%\"}}}\n                                    >\n                                    <div className=\"avatar\">\n                                        <Hexagon backgroundImage={this.state.photo + \"?type=large\"} style={{strokeWidth: 20, stroke: \"#0080ff\"}}/>\n                                    </div>\n                                    <Box paddingX={1} marginLeft={3}>\n                                        <Text weight=\"bold\" truncate>{this.state.displayName}</Text>\n                                        <Text truncate>joined 2 years ago</Text>\n                                    </Box>\n                                </Box>\n\n                                <Box\n                                    alignItems=\"center\"\n                                    direction=\"row\"\n                                    display=\"flex\"\n                                    paddingX={2}\n                                    paddingY={1}\n                                    color=\"lightGray\"\n                                    shape=\"rounded\"\n                                    margin={2}\n                                    dangerouslySetInlineStyle={{__style: {cursor: \"pointer\",  opacity: this.props.currentPlayer === \"#e50000\" ? \"100%\" : \"50%\"}}}\n                                    >\n                                    <div className=\"avatar\">\n                                        <Hexagon backgroundImage={this.state.photo + \"?type=large\"} style={{strokeWidth: 20, stroke: \"#e50000\"}}/>\n                                    </div>\n                                    <Box paddingX={1} marginLeft={3}>\n                                        <Text weight=\"bold\" truncate>{this.state.displayName}</Text>\n                                        <Text truncate>joined 2 years ago</Text>\n                                    </Box>\n                                </Box>\n                            </Box>\n\n                            <Box display={this.state.route === \"Logout\" ? \"block\" : \"none\"}>\n                                <Box padding={2} marginTop={2}><Text align=\"center\">THANK YOU!</Text></Box>\n                                <Box padding={2}><Button color=\"blue\" onClick={() => this.logout()} text=\"Logout\"/></Box>\n                                <Text align=\"center\">OR</Text>\n                                <Box padding={2}><Button color=\"red\" onClick={() => this.logoutAndDelete()} text=\"Logout and remove all data\"/></Box>\n                                <Box paddingY={3}>\n                                    <Text align=\"center\" color=\"gray\">For more information: Please contact hexacon.app@gmail.com</Text>\n                                </Box>\n                                <Box paddingY={2}>\n                                    <Text align=\"center\" weight=\"bold\">Total {this.state.views ? this.state.views : 0} visistors</Text>\n                                </Box>\n                            </Box>\n                        </div>\n                    }\n                </Box>\n                <Box height=\"40vh\" paddingX={2}>\n                    <Text weight=\"bold\" size=\"sm\">Advertisement</Text>\n                </Box>\n            </Box>\n        )\n    }\n}\n\nexport default Menu"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAaA;AAAA;AAAA;AACA;AACA;AAfA;AAkBA;AACA;AAIA;AACA;AAxBA;AA0BA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA3BA;AA6CA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA9CA;AAoDA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAZA;AAYA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAnDA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAUA;AACA;;;AAwDA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AATA;AAWA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AATA;AAWA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAMA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;;;;AAjLA;AACA;AAmLA;;;;A","sourceRoot":""}